module TeacherInterface
  class <%= plural_name.camelize %>Controller < BaseController
    def new
      @<%= model_resource_name %>_form = <%= class_name %>Form.new
    end

    def create
      eligibility_check = EligibilityCheck.find(session[:eligibility_check_id])
      @<%= model_resource_name %>_form = <%= class_name %>Form.new(<%= model_resource_name %>_form_params.merge(eligibility_check:))
      if @<%= model_resource_name %>_form.save
        redirect_to @<%= model_resource_name %>_form.success_url
      else
        render :new
      end
    end

    private

    def <%= model_resource_name %>_form_params
      params.require(:<%= model_resource_name %>_form).permit(<%= attributes.map { |attribute| ":#{attribute.name}" }.join(', ') %>)
    end
  end
end
