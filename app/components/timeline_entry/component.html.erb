<div class="moj-timeline__item">
  <div class="moj-timeline__header">
    <h2 class="moj-timeline__title"><%= t("components.timeline_entry.title.#{timeline_event.event_type}") %></h2>
    <p class="moj-timeline__byline">by <%= creator %></p>
  </div>

  <p class="moj-timeline__date">
  <time datetime="<%= timeline_event.created_at.iso8601 %>">
    <%= timeline_event.created_at.strftime("%e %B %Y at %l:%M %P") %>
  </time>
  </p>

  <div class="moj-timeline__description">
    <% if timeline_event.age_range_subjects_verified? %>
      <p class="govuk-body">Age range: <%= description_vars[:age_range_min] %> to <%= description_vars[:age_range_max] %></p>
      <% if (text = description_vars[:age_range_note]).present? %>
        <%= simple_format text %>
      <% end %>
      <p class="govuk-body">Subjects: <%= description_vars[:subjects] %></p>
      <% if (text = description_vars[:subjects_note]).present? %>
        <%= simple_format text %>
      <% end %>
    <% elsif timeline_event.assessment_section_recorded? %>
      <p class="govuk-body">
        <%= description_vars[:section_name] %>:
        <%= render(StatusTag::Component.new(
          key: timeline_event.id,
          status: description_vars[:section_state],
          class_context: "timeline-event",
          context: :assessor,
          )) %>
      </p>

      <%= govuk_inset_text do %>
        <ul class="govuk-list--bullet">
          <% description_vars[:failure_reasons].each do |failure_reason| %>
            <li>
              <p class="govuk-body">
                <%= t("assessor_interface.assessment_sections.show.failure_reasons.#{failure_reason.key}") %>
              </p>
              <%= simple_format failure_reason.assessor_feedback %>
            </li>
          <% end %>
        </ul>
      <% end %>
    <% elsif timeline_event.further_information_request_assessed? %>
      <p class="govuk-body">Further information request has been assessed.</p>

      <% if (failure_assessor_note = description_vars[:failure_assessor_note]).present? %>
        <%= govuk_inset_text do %>
          <%= simple_format failure_assessor_note %>
        <% end %>
      <% end %>
    <% else %>
      <p class="govuk-body">
        <%= simple_format t("components.timeline_entry.description.#{timeline_event.event_type}", **description_vars).html_safe %>
      </p>
    <% end %>
  </div>
</div>
