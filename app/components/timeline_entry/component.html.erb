<div class="moj-timeline__item">
  <div class="moj-timeline__header">
    <h2 class="moj-timeline__title"><%= title %></h2>
    <p class="moj-timeline__byline">by <%= creator %></p>
  </div>

  <p class="moj-timeline__date">
  <time datetime="<%= timeline_event.created_at.iso8601 %>">
    <%= timeline_event.created_at.to_fs(:date_and_time) %>
  </time>
  </p>

  <div class="moj-timeline__description">
    <% if timeline_event.age_range_subjects_verified? %>
      <p class="govuk-body">Age range: <%= description_vars[:age_range_min] %> to <%= description_vars[:age_range_max] %></p>
      <% if (text = description_vars[:age_range_note]).present? %>
        <%= simple_format text %>
      <% end %>
      <p class="govuk-body">Subjects: <%= description_vars[:subjects] %></p>
      <% if (text = description_vars[:subjects_note]).present? %>
        <%= simple_format text %>
      <% end %>
    <% elsif timeline_event.assessment_section_recorded? %>
      <p class="govuk-body">
        <%= description_vars[:section_name] %>:

        <% if description_vars[:passed] %>
          <%= govuk_tag(text: "Passed", colour: "green") %>
        <% else %>
          <%= govuk_tag(text: "Not passed", colour: "red") %>
        <% end %>
      </p>
      <% if (failure_reason = description_vars[:failure_reasons].first).present? %>
        <%= govuk_inset_text do %>
          <ul class="govuk-list--bullet">
            <%= render "shared/assessor_failure_reason_list_item", failure_reason: %> 
            <% if description_vars[:failure_reasons].size > 1 %>
              <%= govuk_details(summary_text: "View additional reasons") do %>
                <% description_vars[:failure_reasons].drop(1).each do |failure_reason| %>                                
                    <%= render "shared/assessor_failure_reason_list_item", failure_reason: %>
                <% end %>
              <% end %>       
            <% end %>
          </ul>
        <% end %>
      <% end %>
    <% elsif timeline_event.requestable_assessed? && timeline_event.requestable.is_a?(FurtherInformationRequest) %>
      <p class="govuk-body">Further information request has been assessed.</p>

      <% if (failure_assessor_note = description_vars[:failure_assessor_note]).present? %>
        <%= govuk_inset_text do %>
          <%= simple_format failure_assessor_note %>
        <% end %>
      <% end %>
    <% else %>
      <p class="govuk-body"><%= simple_format description.html_safe %></p>
    <% end %>
  </div>
</div>
