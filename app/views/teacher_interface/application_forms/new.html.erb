<% if @country_region_form.needs_region? %>
  <% content_for :page_title, I18n.t("eligibility_check.region.label") %>
<% else %>
  <% content_for :page_title, I18n.t("eligibility_check.country.label") %>
<% end %>

<%= form_with model: @country_region_form, url: [:teacher_interface, @application_form], method: :post do |f| %>
  <%= f.govuk_error_summary %>

  <% if @country_region_form.needs_region? %>
    <%= f.hidden_field :location %>

    <%= f.govuk_radio_buttons_fieldset :region_id,
                                       legend: { text: I18n.t("eligibility_check.region.label"), size: "l", tag: "h1" },
                                       hint: { text: I18n.t("eligibility_check.region.hint") } do %>
      <% @country_region_form.regions.each_with_index do |region, i| %>
        <%= f.govuk_radio_button :region_id,
                                 region.id,
                                 label: { text: region.name },
                                 link_errors: i == 0,
                                 checked: region.id == @eligibility_check&.region_id %>
      <% end %>
    <% end %>
  <% else %>
    <%= f.govuk_select :location,
                       options_for_select(locations, @eligibility_check&.location),
                       hint: { text: I18n.t("eligibility_check.country.hint") },
                       label: { text: I18n.t("eligibility_check.country.label"), size: "l", tag: "h1" },
                       options: { include_blank: true } %>
  <% end %>

  <%= f.govuk_submit prevent_double_click: false %>
<% end %>
