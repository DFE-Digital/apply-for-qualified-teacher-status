<%= form_with model: form, url: @form.work_history.new_record? ? %i[teacher_interface application_form work_histories] : [:school, :teacher_interface, :application_form, form.work_history], method: :post do |f| %>
  <%= f.govuk_error_summary %>

  <h1 class="govuk-heading-l">
    <%= t("application_form.work_history.school.heading.#{form.work_history.locale_key}") %>
  </h1>

  <p class="govuk-body">Tell us about the teaching roles you’ve held <b>since completing</b> your teaching qualification.</p>
  <p class="govuk-inset-text">We cannot accept roles that took place before you became recognised as a teacher.</p>
  <p class="govuk-body">
    If you started a role before you were recognised as a teacher, but you continued in the same role once you became recognised,
    only the part of that role that took place after you were recognised will count towards your QTS application.
  </p>

  <% if form.work_history.new_record? %>
    <%= f.govuk_check_boxes_fieldset :meets_all_requirements, legend: nil, multiple: false do %>
      <p class="govuk-body">Every role you add must meet <strong class="govuk-!-font-weight-bold">ALL</strong> of the following requirements.</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>You were qualified to teach while working this role.</li>
        <li>You worked unsupervised with children aged between 5 and 16 years.</li>
        <li>You were solely responsible for planning, preparing and delivering lessons to at least 4 students at a time.</li>
        <li>You were solely responsible for assessing and reporting on the progress of those students.</li>
      </ul>

      <p class="govuk-body">We cannot consider any teaching roles that do not meet ALL of these requirements.</p>

      <%= f.govuk_check_box :meets_all_requirements, 1, 0, multiple: false, link_errors: true, label: {
        text: "The role I’m about to add meets ALL of these requirements.", size: "s"
      } %>

      <p class="govuk-body govuk-!-margin-top-3">
        <%= govuk_link_to "I do not have any roles that meet all of these requirements.", requirements_unmet_teacher_interface_application_form_work_histories_path %>
      </p>
    <% end %>
  <% end %>

  <%= f.govuk_fieldset legend: { text: "Where was the role?" } do %>
    <%= f.govuk_text_field :school_name %>

    <%= f.govuk_text_field :city %>

    <%= f.govuk_select :country_location,
                       options_for_select(locations, form.country_location),
                       options: { include_blank: true } %>
  <% end %>

  <%= f.govuk_text_field :job, label: { size: "m" } %>

  <%= f.govuk_text_field :hours_per_week, width: 5, label: { size: "m" } %>

  <%= f.govuk_date_field :start_date, omit_day: true, maxlength_enabled: true %>
  <%= f.govuk_check_box :start_date_is_estimate, 1, 0, multiple: false, link_errors: true, label: {
    text: "This is an estimate"
  } %>

  <%= f.govuk_radio_buttons_fieldset :still_employed do %>
    <%= f.govuk_radio_button :still_employed, :true, link_errors: true %>
    <%= f.govuk_radio_button :still_employed, :false do %>
      <%= f.govuk_date_field :end_date, omit_day: true, maxlength_enabled: true %>
      <%= f.govuk_check_box :end_date_is_estimate, 1, 0, multiple: false, link_errors: true, label: {
        text: "This is an estimate"
      } %>
    <% end %>
  <% end %>

  <%= render "shared/save_submit_buttons", f: %>
<% end %>
